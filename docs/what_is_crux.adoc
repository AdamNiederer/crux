= What is Crux?

Crux is an unbundled, distributed, bi-temporal graph database.

== Unbundled

Crux—to use Martin Kleppmann’s phrase—is an _unbundled_
database. It is a database turned inside out, using:

* Apache Kafka for the primary storage of transactions and documents
as semi-immutable logs.
* RocksDB or LMDB to host indices for rich query support.

image::crux-kafka-local-node.png[Crux Kafka local node diagram,558,571]

== Distributed

Nodes can come and go, with local indices stored in a Key/Value store
such as RocksDB, sharing the master data living in a central log topics
(only Kafka is currently supported).

== Bitemporality

Crux is a _bitemporal_ database that stores _transaction time_ and _valid time_
histories. While a _[uni]temporal_ database enables "time travel" querying
through the transactional sequence of database states from the moment of
database creation to its current state, Crux also provides "time travel"
querying for a discrete valid time axis without unnecessary design complexity.
This means a Crux user can populate the database with past and future
information regardless of the order in which the information arrives, to build
an ever-improving temporal model of a given domain.

<<bitemp.adoc#,Read more about Bitemporality in Crux.>>

== Query

Crux supports a Datalog query interface for reads. Queries are
executed so that the results are lazily streamed from the underlying
indices.

Crux is ultimately a store of versioned EDN documents. The attributes
of these documents are indexed, allowing for queries.

== Schemaless

Crux does not use a schema for the documents. One reason for this is
that data might come from many different places, and may not
ultimately be owned by the service using Crux to query the data.

== Eviction

Crux supports eviction of past data, to play nicely with GDPR and
similar concerns.

The main transaction log contains only hashes and is immutable. The
content data itself is stored in a secondary document topic that can
be evicted by compaction.
